!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/js/",n(n.s=131)}([function(t,e,n){var o=n(2),r=n(34),i=n(3),a=n(35),s=n(37),c=n(65),l=r("wks"),u=o.Symbol,p=c?u:u&&u.withoutSetter||a;t.exports=function(t){return i(l,t)||(s&&i(u,t)?l[t]=u[t]:l[t]=p("Symbol."+t)),l[t]}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(92))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var o=n(6),r=n(54),i=n(8),a=n(22),s=Object.defineProperty;e.f=o?s:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var o=n(2),r=n(21).f,i=n(9),a=n(12),s=n(33),c=n(58),l=n(64);t.exports=function(t,e){var n,u,p,f,m,d=t.target,h=t.global,g=t.stat;if(n=h?o:g?o[d]||s(d,{}):(o[d]||{}).prototype)for(u in e){if(f=e[u],p=t.noTargetGet?(m=r(n,u))&&m.value:n[u],!l(h?u:d+(g?".":"#")+u,t.forced)&&void 0!==p){if(typeof f==typeof p)continue;c(f,p)}(t.sham||p&&p.sham)&&i(f,"sham",!0),a(n,u,f,t)}}},function(t,e,n){var o=n(1);t.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var o=n(7);t.exports=function(t){if(!o(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var o=n(6),r=n(4),i=n(16);t.exports=o?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var o=n(53),r=n(10);t.exports=function(t){return o(r(t))}},function(t,e,n){var o=n(2),r=n(9),i=n(3),a=n(33),s=n(56),c=n(18),l=c.get,u=c.enforce,p=String(String).split("String");(t.exports=function(t,e,n,s){var c=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||r(n,"name",e),u(n).source=p.join("string"==typeof e?e:"")),t!==o?(c?!f&&t[e]&&(l=!0):delete t[e],l?t[e]=n:r(t,e,n)):l?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(t,e,n){"use strict";var o=n(5),r=n(41).find,i=n(69),a=n(30),s=!0,c=a("find");"find"in[]&&Array(1).find((function(){s=!1})),o({target:"Array",proto:!0,forced:s||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(t,e,n){var o=n(26),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},function(t,e,n){"use strict";var o=n(5),r=n(50);o({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var o,r,i,a=n(93),s=n(2),c=n(7),l=n(9),u=n(3),p=n(23),f=n(24),m=s.WeakMap;if(a){var d=new m,h=d.get,g=d.has,v=d.set;o=function(t,e){return v.call(d,t,e),e},r=function(t){return h.call(d,t)||{}},i=function(t){return g.call(d,t)}}else{var y=p("state");f[y]=!0,o=function(t,e){return l(t,y,e),e},r=function(t){return u(t,y)?t[y]:{}},i=function(t){return u(t,y)}}t.exports={set:o,get:r,has:i,enforce:function(t){return i(t)?r(t):o(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports=!1},function(t,e,n){var o=n(59),r=n(2),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(o[t])||i(r[t]):o[t]&&o[t][e]||r[t]&&r[t][e]}},function(t,e,n){var o=n(6),r=n(52),i=n(16),a=n(11),s=n(22),c=n(3),l=n(54),u=Object.getOwnPropertyDescriptor;e.f=o?u:function(t,e){if(t=a(t),e=s(e,!0),l)try{return u(t,e)}catch(t){}if(c(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var o=n(7);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var o=n(34),r=n(35),i=o("keys");t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports={}},function(t,e,n){var o=n(60),r=n(36).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e,n){var o=n(10);t.exports=function(t){return Object(o(t))}},function(t,e,n){"use strict";var o=n(11),r=n(69),i=n(44),a=n(18),s=n(70),c=a.set,l=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){c(this,{type:"Array Iterator",target:o(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,o=t.index++;return!e||o>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:o,done:!1}:"values"==n?{value:e[o],done:!1}:{value:[o,e[o]],done:!1}}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var o=n(45),r=n(12),i=n(104);o||r(Object.prototype,"toString",i,{unsafe:!0})},function(t,e,n){var o=n(6),r=n(1),i=n(3),a=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(i(s,t))return s[t];e||(e={});var n=[][t],l=!!i(e,"ACCESSORS")&&e.ACCESSORS,u=i(e,0)?e[0]:c,p=i(e,1)?e[1]:void 0;return s[t]=!!n&&!r((function(){if(l&&!o)return!0;var t={length:-1};l?a(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,u,p)}))}},function(t,e,n){"use strict";var o=n(80),r=n(8),i=n(27),a=n(14),s=n(26),c=n(10),l=n(81),u=n(82),p=Math.max,f=Math.min,m=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g;o("replace",2,(function(t,e,n,o){var g=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=o.REPLACE_KEEPS_$0,y=g?"$":"$0";return[function(n,o){var r=c(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r,o):e.call(String(r),n,o)},function(t,o){if(!g&&v||"string"==typeof o&&-1===o.indexOf(y)){var i=n(e,t,this,o);if(i.done)return i.value}var c=r(t),m=String(this),d="function"==typeof o;d||(o=String(o));var h=c.global;if(h){var w=c.unicode;c.lastIndex=0}for(var C=[];;){var x=u(c,m);if(null===x)break;if(C.push(x),!h)break;""===String(x[0])&&(c.lastIndex=l(m,a(c.lastIndex),w))}for(var T,_="",O=0,S=0;S<C.length;S++){x=C[S];for(var R=String(x[0]),E=p(f(s(x.index),m.length),0),P=[],A=1;A<x.length;A++)P.push(void 0===(T=x[A])?T:String(T));var I=x.groups;if(d){var M=[R].concat(P,E,m);void 0!==I&&M.push(I);var $=String(o.apply(void 0,M))}else $=b(R,m,E,P,I,o);E>=O&&(_+=m.slice(O,E)+$,O=E+R.length)}return _+m.slice(O)}];function b(t,n,o,r,a,s){var c=o+t.length,l=r.length,u=h;return void 0!==a&&(a=i(a),u=d),e.call(s,u,(function(e,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,o);case"'":return n.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>l){var p=m(u/10);return 0===p?e:p<=l?void 0===r[p-1]?i.charAt(1):r[p-1]+i.charAt(1):e}s=r[u-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var o=n(5),r=n(2),i=n(20),a=n(19),s=n(6),c=n(37),l=n(65),u=n(1),p=n(3),f=n(38),m=n(7),d=n(8),h=n(27),g=n(11),v=n(22),y=n(16),b=n(39),w=n(66),C=n(25),x=n(97),T=n(63),_=n(21),O=n(4),S=n(52),R=n(9),E=n(12),P=n(34),A=n(23),I=n(24),M=n(35),$=n(0),k=n(67),L=n(68),D=n(40),N=n(18),j=n(41).forEach,U=A("hidden"),F=$("toPrimitive"),V=N.set,B=N.getterFor("Symbol"),q=Object.prototype,W=r.Symbol,Y=i("JSON","stringify"),H=_.f,z=O.f,G=x.f,K=S.f,Q=P("symbols"),J=P("op-symbols"),X=P("string-to-symbol-registry"),Z=P("symbol-to-string-registry"),tt=P("wks"),et=r.QObject,nt=!et||!et.prototype||!et.prototype.findChild,ot=s&&u((function(){return 7!=b(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(t,e,n){var o=H(q,e);o&&delete q[e],z(t,e,n),o&&t!==q&&z(q,e,o)}:z,rt=function(t,e){var n=Q[t]=b(W.prototype);return V(n,{type:"Symbol",tag:t,description:e}),s||(n.description=e),n},it=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},at=function(t,e,n){t===q&&at(J,e,n),d(t);var o=v(e,!0);return d(n),p(Q,o)?(n.enumerable?(p(t,U)&&t[U][o]&&(t[U][o]=!1),n=b(n,{enumerable:y(0,!1)})):(p(t,U)||z(t,U,y(1,{})),t[U][o]=!0),ot(t,o,n)):z(t,o,n)},st=function(t,e){d(t);var n=g(e),o=w(n).concat(pt(n));return j(o,(function(e){s&&!ct.call(n,e)||at(t,e,n[e])})),t},ct=function(t){var e=v(t,!0),n=K.call(this,e);return!(this===q&&p(Q,e)&&!p(J,e))&&(!(n||!p(this,e)||!p(Q,e)||p(this,U)&&this[U][e])||n)},lt=function(t,e){var n=g(t),o=v(e,!0);if(n!==q||!p(Q,o)||p(J,o)){var r=H(n,o);return!r||!p(Q,o)||p(n,U)&&n[U][o]||(r.enumerable=!0),r}},ut=function(t){var e=G(g(t)),n=[];return j(e,(function(t){p(Q,t)||p(I,t)||n.push(t)})),n},pt=function(t){var e=t===q,n=G(e?J:g(t)),o=[];return j(n,(function(t){!p(Q,t)||e&&!p(q,t)||o.push(Q[t])})),o};(c||(E((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=M(t),n=function(t){this===q&&n.call(J,t),p(this,U)&&p(this[U],e)&&(this[U][e]=!1),ot(this,e,y(1,t))};return s&&nt&&ot(q,e,{configurable:!0,set:n}),rt(e,t)}).prototype,"toString",(function(){return B(this).tag})),E(W,"withoutSetter",(function(t){return rt(M(t),t)})),S.f=ct,O.f=at,_.f=lt,C.f=x.f=ut,T.f=pt,k.f=function(t){return rt($(t),t)},s&&(z(W.prototype,"description",{configurable:!0,get:function(){return B(this).description}}),a||E(q,"propertyIsEnumerable",ct,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),j(w(tt),(function(t){L(t)})),o({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=String(t);if(p(X,e))return X[e];var n=W(e);return X[e]=n,Z[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(p(Z,t))return Z[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),o({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(t,e){return void 0===e?b(t):st(b(t),e)},defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:lt}),o({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ut,getOwnPropertySymbols:pt}),o({target:"Object",stat:!0,forced:u((function(){T.f(1)}))},{getOwnPropertySymbols:function(t){return T.f(h(t))}}),Y)&&o({target:"JSON",stat:!0,forced:!c||u((function(){var t=W();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}))},{stringify:function(t,e,n){for(var o,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(o=e,(m(e)||void 0!==t)&&!it(t))return f(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!it(e))return e}),r[1]=e,Y.apply(null,r)}});W.prototype[F]||R(W.prototype,F,W.prototype.valueOf),D(W,"Symbol"),I[U]=!0},function(t,e,n){var o=n(2),r=n(9);t.exports=function(t,e){try{r(o,t,e)}catch(n){o[t]=e}return e}},function(t,e,n){var o=n(19),r=n(57);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+o).toString(36)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var o=n(1);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())}))},function(t,e,n){var o=n(17);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,n){var o,r=n(8),i=n(95),a=n(36),s=n(24),c=n(96),l=n(55),u=n(23),p=u("IE_PROTO"),f=function(){},m=function(t){return"<script>"+t+"<\/script>"},d=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=o?function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e}(o):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};s[p]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=r(t),n=new f,f.prototype=null,n[p]=t):n=d(),void 0===e?n:i(n,e)}},function(t,e,n){var o=n(4).f,r=n(3),i=n(0)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},function(t,e,n){var o=n(98),r=n(53),i=n(27),a=n(14),s=n(100),c=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,u=4==t,p=6==t,f=5==t||p;return function(m,d,h,g){for(var v,y,b=i(m),w=r(b),C=o(d,h,3),x=a(w.length),T=0,_=g||s,O=e?_(m,x):n?_(m,0):void 0;x>T;T++)if((f||T in w)&&(y=C(v=w[T],T,b),t))if(e)O[T]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return T;case 2:c.call(O,v)}else if(u)return!1;return p?-1:l||u?u:O}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(t,e,n){"use strict";var o=n(5),r=n(6),i=n(2),a=n(3),s=n(7),c=n(4).f,l=n(58),u=i.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var p={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(p[e]=!0),e};l(f,u);var m=f.prototype=u.prototype;m.constructor=f;var d=m.toString,h="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(p,t))return"";var n=h?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),o({global:!0,forced:!0},{Symbol:f})}},function(t,e,n){n(68)("iterator")},function(t,e){t.exports={}},function(t,e,n){var o={};o[n(0)("toStringTag")]="z",t.exports="[object z]"===String(o)},function(t,e,n){"use strict";var o=n(75).charAt,r=n(18),i=n(70),a=r.set,s=r.getterFor("String Iterator");i(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=o(n,r),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var o=n(2),r=n(106),i=n(28),a=n(9),s=n(0),c=s("iterator"),l=s("toStringTag"),u=i.values;for(var p in r){var f=o[p],m=f&&f.prototype;if(m){if(m[c]!==u)try{a(m,c,u)}catch(t){m[c]=u}if(m[l]||a(m,l,p),r[p])for(var d in i)if(m[d]!==i[d])try{a(m,d,i[d])}catch(t){m[d]=i[d]}}}},function(t,e,n){"use strict";var o=n(5),r=n(61).indexOf,i=n(112),a=n(30),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,l=i("indexOf"),u=a("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(t){return c?s.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var o=n(8);t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var o,r,i=n(49),a=n(78),s=RegExp.prototype.exec,c=String.prototype.replace,l=s,u=(o=/a/,r=/b*/g,s.call(o,"a"),s.call(r,"a"),0!==o.lastIndex||0!==r.lastIndex),p=a.UNSUPPORTED_Y||a.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(u||f||p)&&(l=function(t){var e,n,o,r,a=this,l=p&&a.sticky,m=i.call(a),d=a.source,h=0,g=t;return l&&(-1===(m=m.replace("y","")).indexOf("g")&&(m+="g"),g=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(d="(?: "+d+")",g=" "+g,h++),n=new RegExp("^(?:"+d+")",m)),f&&(n=new RegExp("^"+d+"$(?!\\s)",m)),u&&(e=a.lastIndex),o=s.call(l?n:a,g),l?o?(o.input=o.input.slice(h),o[0]=o[0].slice(h),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:u&&o&&(a.lastIndex=a.global?o.index+o[0].length:e),f&&o&&o.length>1&&c.call(o[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)})),o}),t.exports=l},function(t,e,n){"use strict";var o=n(12),r=n(8),i=n(1),a=n(49),s=RegExp.prototype,c=s.toString,l=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u="toString"!=c.name;(l||u)&&o(RegExp.prototype,"toString",(function(){var t=r(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in s)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!o.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:o},function(t,e,n){var o=n(1),r=n(17),i="".split;t.exports=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var o=n(6),r=n(1),i=n(55);t.exports=!o&&!r((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var o=n(2),r=n(7),i=o.document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var o=n(57),r=Function.toString;"function"!=typeof o.inspectSource&&(o.inspectSource=function(t){return r.call(t)}),t.exports=o.inspectSource},function(t,e,n){var o=n(2),r=n(33),i=o["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=i},function(t,e,n){var o=n(3),r=n(94),i=n(21),a=n(4);t.exports=function(t,e){for(var n=r(e),s=a.f,c=i.f,l=0;l<n.length;l++){var u=n[l];o(t,u)||s(t,u,c(e,u))}}},function(t,e,n){var o=n(2);t.exports=o},function(t,e,n){var o=n(3),r=n(11),i=n(61).indexOf,a=n(24);t.exports=function(t,e){var n,s=r(t),c=0,l=[];for(n in s)!o(a,n)&&o(s,n)&&l.push(n);for(;e.length>c;)o(s,n=e[c++])&&(~i(l,n)||l.push(n));return l}},function(t,e,n){var o=n(11),r=n(14),i=n(62),a=function(t){return function(e,n,a){var s,c=o(e),l=r(c.length),u=i(a,l);if(t&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var o=n(26),r=Math.max,i=Math.min;t.exports=function(t,e){var n=o(t);return n<0?r(n+e,0):i(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var o=n(1),r=/#|\.prototype\./,i=function(t,e){var n=s[a(t)];return n==l||n!=c&&("function"==typeof e?o(e):!!e)},a=i.normalize=function(t){return String(t).replace(r,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",l=i.POLYFILL="P";t.exports=i},function(t,e,n){var o=n(37);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var o=n(60),r=n(36);t.exports=Object.keys||function(t){return o(t,r)}},function(t,e,n){var o=n(0);e.f=o},function(t,e,n){var o=n(59),r=n(3),i=n(67),a=n(4).f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});r(e,t)||a(e,t,{value:i.f(t)})}},function(t,e,n){var o=n(0),r=n(39),i=n(4),a=o("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:r(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,n){"use strict";var o=n(5),r=n(101),i=n(72),a=n(73),s=n(40),c=n(9),l=n(12),u=n(0),p=n(19),f=n(44),m=n(71),d=m.IteratorPrototype,h=m.BUGGY_SAFARI_ITERATORS,g=u("iterator"),v=function(){return this};t.exports=function(t,e,n,u,m,y,b){r(n,e,u);var w,C,x,T=function(t){if(t===m&&E)return E;if(!h&&t in S)return S[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},_=e+" Iterator",O=!1,S=t.prototype,R=S[g]||S["@@iterator"]||m&&S[m],E=!h&&R||T(m),P="Array"==e&&S.entries||R;if(P&&(w=i(P.call(new t)),d!==Object.prototype&&w.next&&(p||i(w)===d||(a?a(w,d):"function"!=typeof w[g]&&c(w,g,v)),s(w,_,!0,!0),p&&(f[_]=v))),"values"==m&&R&&"values"!==R.name&&(O=!0,E=function(){return R.call(this)}),p&&!b||S[g]===E||c(S,g,E),f[e]=E,m)if(C={values:T("values"),keys:y?E:T("keys"),entries:T("entries")},b)for(x in C)!h&&!O&&x in S||l(S,x,C[x]);else o({target:e,proto:!0,forced:h||O},C);return C}},function(t,e,n){"use strict";var o,r,i,a=n(72),s=n(9),c=n(3),l=n(0),u=n(19),p=l("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(r=a(a(i)))!==Object.prototype&&(o=r):f=!0),null==o&&(o={}),u||c(o,p)||s(o,p,(function(){return this})),t.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:f}},function(t,e,n){var o=n(3),r=n(27),i=n(23),a=n(102),s=i("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=r(t),o(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,n){var o=n(8),r=n(103);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return o(n),r(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){var o=n(6),r=n(4).f,i=Function.prototype,a=i.toString,s=/^\s*function ([^ (]*)/;!o||"name"in i||r(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},function(t,e,n){var o=n(26),r=n(10),i=function(t){return function(e,n){var i,a,s=String(r(e)),c=o(n),l=s.length;return c<0||c>=l?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,n){var o=n(7),r=n(17),i=n(0)("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==r(t))}},function(t,e,n){var o=n(6),r=n(2),i=n(64),a=n(113),s=n(4).f,c=n(25).f,l=n(76),u=n(49),p=n(78),f=n(12),m=n(1),d=n(18).set,h=n(114),g=n(0)("match"),v=r.RegExp,y=v.prototype,b=/a/g,w=/a/g,C=new v(b)!==b,x=p.UNSUPPORTED_Y;if(o&&i("RegExp",!C||x||m((function(){return w[g]=!1,v(b)!=b||v(w)==w||"/a/i"!=v(b,"i")})))){for(var T=function(t,e){var n,o=this instanceof T,r=l(t),i=void 0===e;if(!o&&r&&t.constructor===T&&i)return t;C?r&&!i&&(t=t.source):t instanceof T&&(i&&(e=u.call(t)),t=t.source),x&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=a(C?new v(t,e):v(t,e),o?this:y,T);return x&&n&&d(s,{sticky:n}),s},_=function(t){t in T||s(T,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},O=c(v),S=0;O.length>S;)_(O[S++]);y.constructor=T,T.prototype=y,f(r,"RegExp",T)}h("RegExp")},function(t,e,n){"use strict";var o=n(1);function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=o((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=o((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,n){"use strict";var o=n(80),r=n(8),i=n(14),a=n(10),s=n(81),c=n(82);o("match",1,(function(t,e,n){return[function(e){var n=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,n):new RegExp(e)[t](String(n))},function(t){var o=n(e,t,this);if(o.done)return o.value;var a=r(t),l=String(this);if(!a.global)return c(a,l);var u=a.unicode;a.lastIndex=0;for(var p,f=[],m=0;null!==(p=c(a,l));){var d=String(p[0]);f[m]=d,""===d&&(a.lastIndex=s(l,i(a.lastIndex),u)),m++}return 0===m?null:f}]}))},function(t,e,n){"use strict";n(15);var o=n(12),r=n(1),i=n(0),a=n(50),s=n(9),c=i("species"),l=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u="$0"==="a".replace(/./,"$0"),p=i("replace"),f=!!/./[p]&&""===/./[p]("a","$0"),m=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,p){var d=i(t),h=!r((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),g=h&&!r((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!h||!g||"replace"===t&&(!l||!u||f)||"split"===t&&!m){var v=/./[d],y=n(d,""[t],(function(t,e,n,o,r){return e.exec===a?h&&!r?{done:!0,value:v.call(e,n,o)}:{done:!0,value:t.call(n,e,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=y[0],w=y[1];o(String.prototype,t,b),o(RegExp.prototype,d,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}p&&s(RegExp.prototype[d],"sham",!0)}},function(t,e,n){"use strict";var o=n(75).charAt;t.exports=function(t,e,n){return e+(n?o(t,e).length:1)}},function(t,e,n){var o=n(17),r=n(50);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==o(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";var o=n(5),r=n(7),i=n(38),a=n(62),s=n(14),c=n(11),l=n(122),u=n(0),p=n(86),f=n(30),m=p("slice"),d=f("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),g=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!m||!d},{slice:function(t,e){var n,o,u,p=c(this),f=s(p.length),m=a(t,f),d=a(void 0===e?f:e,f);if(i(p)&&("function"!=typeof(n=p.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(p,m,d);for(o=new(void 0===n?Array:n)(v(d-m,0)),u=0;m<d;m++,u++)m in p&&l(o,u,p[m]);return o.length=u,o}})},function(t,e,n){var o=n(1),r=n(0),i=n(123),a=r("species");t.exports=function(t){return i>=51||!o((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports=jQuery},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([r]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o=0;o<t.length;o++){var r=[].concat(t[o]);n&&(r[2]?r[2]="".concat(n," and ").concat(r[2]):r[2]=n),e.push(r)}},e}},function(t,e,n){"use strict";function o(t,e){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=i[0],s={id:t+":"+r,css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},p=null,f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,r){l=n,p=r||{};var a=o(t,e);return d(a),function(e){for(var n=[],r=0;r<a.length;r++){var s=a[r];(c=i[s.id]).refs--,n.push(c)}e?d(a=o(t,e)):a=[];for(r=0;r<n.length;r++){var c;if(0===(c=n[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}}function d(t){for(var e=0;e<t.length;e++){var n=t[e],o=i[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(g(n.parts[r]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var a=[];for(r=0;r<n.parts.length;r++)a.push(g(n.parts[r]));i[n.id]={id:n.id,refs:1,parts:a}}}}function h(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function g(t){var e,n,o=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(o){if(l)return u;o.parentNode.removeChild(o)}if(f){var r=c++;o=s||(s=h()),e=b.bind(null,o,r,!1),n=b.bind(null,o,r,!0)}else o=h(),e=w.bind(null,o),n=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else n()}}var v,y=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function b(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function w(t,e){var n=e.css,o=e.media,r=e.sourceMap;if(o&&t.setAttribute("media",o),p.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},function(t,e){OCA.Comments||(OCA.Comments={})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var o=n(2),r=n(56),i=o.WeakMap;t.exports="function"==typeof i&&/native code/.test(r(i))},function(t,e,n){var o=n(20),r=n(25),i=n(63),a=n(8);t.exports=o("Reflect","ownKeys")||function(t){var e=r.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var o=n(6),r=n(4),i=n(8),a=n(66);t.exports=o?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,c=0;s>c;)r.f(t,n=o[c++],e[n]);return t}},function(t,e,n){var o=n(20);t.exports=o("document","documentElement")},function(t,e,n){var o=n(11),r=n(25).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return r(t)}catch(t){return a.slice()}}(t):r(o(t))}},function(t,e,n){var o=n(99);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var o=n(7),r=n(38),i=n(0)("species");t.exports=function(t,e){var n;return r(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!r(n.prototype)?o(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){"use strict";var o=n(71).IteratorPrototype,r=n(39),i=n(16),a=n(40),s=n(44),c=function(){return this};t.exports=function(t,e,n){var l=e+" Iterator";return t.prototype=r(o,{next:i(1,n)}),a(t,l,!1,!0),s[l]=c,t}},function(t,e,n){var o=n(1);t.exports=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var o=n(7);t.exports=function(t){if(!o(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var o=n(45),r=n(105);t.exports=o?{}.toString:function(){return"[object "+r(this)+"]"}},function(t,e,n){var o=n(45),r=n(17),i=n(0)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=o?r:function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var o,r=n(5),i=n(21).f,a=n(14),s=n(108),c=n(10),l=n(109),u=n(19),p="".startsWith,f=Math.min,m=l("startsWith");r({target:"String",proto:!0,forced:!!(u||m||(o=i(String.prototype,"startsWith"),!o||o.writable))&&!m},{startsWith:function(t){var e=String(c(this));s(t);var n=a(f(arguments.length>1?arguments[1]:void 0,e.length)),o=String(t);return p?p.call(e,o,n):e.slice(n,n+o.length)===o}})},function(t,e,n){var o=n(76);t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var o=n(0)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[o]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e){!function(t,e){var n=t.Backbone.Collection.extend({sync:t.Backbone.davSync,model:e.Comments.CommentModel,_objectType:"files",_objectId:null,_endReached:!1,_limit:20,initialize:function(t,e){(e=e||{}).objectType&&(this._objectType=e.objectType),e.objectId&&(this._objectId=e.objectId)},url:function(){return t.linkToRemote("dav")+"/comments/"+encodeURIComponent(this._objectType)+"/"+encodeURIComponent(this._objectId)+"/"},setObjectId:function(t){this._objectId=t},hasMoreResults:function(){return!this._endReached},reset:function(){return this._endReached=!1,this._summaryModel=null,t.Backbone.Collection.prototype.reset.apply(this,arguments)},fetchNext:function(t){var e=this;if(!this.hasMoreResults())return null;var o='<?xml version="1.0" encoding="utf-8" ?>\n<oc:filter-comments xmlns:D="DAV:" xmlns:oc="http://owncloud.org/ns">\n    <oc:limit>'+(this._limit+1)+"</oc:limit>\n    <oc:offset>"+this.length+"</oc:offset>\n</oc:filter-comments>\n",r=(t=t||{}).success;return t=_.extend({remove:!1,parse:!0,data:o,davProperties:n.prototype.model.prototype.davProperties,success:function(n){if(n.length<=e._limit?e._endReached=!0:n=_.initial(n),!e.set(n,t))return!1;r&&r.apply(null,arguments),e.trigger("sync","REPORT",e,t)}},t),this.sync("REPORT",this,t)},getSummaryModel:function(){return this._summaryModel||(this._summaryModel=new e.Comments.CommentSummaryModel({id:this._objectId,objectType:this._objectType})),this._summaryModel},updateReadMarker:function(t,e){return e=e||{},this.getSummaryModel().save({readMarker:(t||new Date).toUTCString()},e)}});e.Comments.CommentCollection=n}(OC,OCA)},function(t,e){!function(t,e){_.extend(t.Files.Client,{PROPERTY_READMARKER:"{"+t.Files.Client.NS_OWNCLOUD+"}readMarker"});var n=t.Backbone.Model.extend({sync:t.Backbone.davSync,_objectType:"files",_objectId:null,davProperties:{readMarker:t.Files.Client.PROPERTY_READMARKER},initialize:function(t,e){(e=e||{}).objectType&&(this._objectType=e.objectType)},url:function(){return t.linkToRemote("dav")+"/comments/"+encodeURIComponent(this._objectType)+"/"+encodeURIComponent(this.id)+"/"}});e.Comments.CommentSummaryModel=n}(OC,OCA)},function(t,e,n){"use strict";var o=n(1);t.exports=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var o=n(7),r=n(73);t.exports=function(t,e,n){var i,a;return r&&"function"==typeof(i=e.constructor)&&i!==n&&o(a=i.prototype)&&a!==n.prototype&&r(t,a),t}},function(t,e,n){"use strict";var o=n(20),r=n(4),i=n(0),a=n(6),s=i("species");t.exports=function(t){var e=o(t),n=r.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var o=n(5),r=n(116).trim;o({target:"String",proto:!0,forced:n(117)("trim")},{trim:function(){return r(this)}})},function(t,e,n){var o=n(10),r="["+n(83)+"]",i=RegExp("^"+r+r+"*"),a=RegExp(r+r+"*$"),s=function(t){return function(e){var n=String(o(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,n){var o=n(1),r=n(83);t.exports=function(t){return o((function(){return!!r[t]()||"​᠎"!="​᠎"[t]()||r[t].name!==t}))}},function(t,e,n){"use strict";var o=n(5),r=n(119);o({target:"String",proto:!0,forced:n(120)("link")},{link:function(t){return r(this,"a","href",t)}})},function(t,e,n){var o=n(10),r=/"/g;t.exports=function(t,e,n,i){var a=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(r,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var o=n(1);t.exports=function(t){return o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e,n){"use strict";(function(t){n(32),n(42),n(43),n(13),n(28),n(85),n(29),n(15),n(51),n(46),n(31),n(47);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! jquery.caret 2015-02-01 */!function(o,r){"function"==typeof define&&n(87)?define(["jquery"],(function(t){return o.returnExportsGlobal=r(t)})):"object"==("undefined"==typeof exports?"undefined":e(exports))?t.exports=r(n(88)):r(jQuery)}(void 0,(function(t){var e,n,o,r,i,a,s,c;e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return this.getPosition()},e.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),(t=a.body.createTextRange()).moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?((t=n.cloneRange()).selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return(t=a.selection.createRange().duplicate()).moveStart("character",-1),{height:(e=t.getBoundingClientRect()).bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,o,r,i;return s.getSelection&&(o=this.range())?(o.endOffset-1>0&&o.endContainer===!this.domInputor&&((e=o.cloneRange()).setStart(o.endContainer,o.endOffset-1),e.setEnd(o.endContainer,o.endOffset),n={height:(r=e.getBoundingClientRect()).height,left:r.left+r.width,top:r.top},e.detach()),n&&0!==(null!=n?n.height:void 0)||(e=o.cloneRange(),i=t(a.createTextNode("|")),e.insertNode(i[0]),e.selectNode(i[0]),n={height:(r=e.getBoundingClientRect()).height,left:r.left,top:r.top},i.remove(),e.detach())):a.selection&&(n=this.getOldIEOffset()),n&&(n.top+=t(s).scrollTop(),n.left+=t(s).scrollLeft()),n},e.prototype.range=function(){var t;if(s.getSelection)return(t=s.getSelection()).rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,o,r,i;return e=this.domInputor,o=0,(r=a.selection.createRange())&&r.parentElement()===e&&(n=e.value.replace(/\r\n/g,"\n").length,(i=e.createTextRange()).moveToBookmark(r.getBookmark()),(t=e.createTextRange()).collapse(!1),o=i.compareEndPoints("StartToEnd",t)>-1?n:-i.moveStart("character",-n)),o},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,a.selection?((n=e.createTextRange()).move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e;return e=this.domInputor.createTextRange(),t||(t=this.getPos()),e.move("character",t),{left:e.boundingLeft,top:e.boundingTop,height:e.boundingHeight}},e.prototype.getOffset=function(e){var n,o,r;return n=this.$inputor,a.selection?((o=this.getIEOffset(e)).top+=t(s).scrollTop()+n.scrollTop(),o.left+=t(s).scrollLeft()+n.scrollLeft(),o):(o=n.offset(),r=this.getPosition(e),o={left:o.left+r.left-n.scrollLeft(),top:o.top+r.top-n.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,n,r,i,a;return e=this.$inputor,r=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),n=e.val().slice(t),i="<span style='position: relative; display: inline;'>"+r(a)+"</span>",i+="<span id='caret' style='position: relative; display: inline;'>|</span>",i+="<span style='position: relative; display: inline;'>"+r(n)+"</span>",new o(e).create(i).rect()},e.prototype.getIEPosition=function(t){var e,n;return n=this.getIEOffset(t),e=this.$inputor.offset(),{left:n.left-e.left,top:n.top-e.top,height:n.height}},e}(),o=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,(function(t,o){return e[o]=n.$inputor.css(o)})),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return n={left:(e=(t=this.$mirror.find("#caret")).position()).left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},i={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){return this.getOffset(t)}},a=null,s=null,c=function(t){var e;return(e=null!=t?t.iframe:void 0)?(e,s=e.contentWindow,a=e.contentDocument||s.document):(void 0,s=window,a=document)},t.fn.caret=function(o,a,s){var l;return i[o]?(t.isPlainObject(a)?(c(a),a=void 0):c(s),l=r.contentEditable(this)?new e(this):new n(this),i[o].apply(l,[a])):t.error("Method "+o+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=r,t.fn.caret.apis=i}))}).call(this,n(84)(t))},function(t,e,n){"use strict";var o=n(22),r=n(4),i=n(16);t.exports=function(t,e,n){var a=o(e);a in t?r.f(t,a,i(0,n)):t[a]=n}},function(t,e,n){var o,r,i=n(2),a=n(124),s=i.process,c=s&&s.versions,l=c&&c.v8;l?r=(o=l.split("."))[0]+o[1]:a&&(!(o=a.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=a.match(/Chrome\/(\d+)/))&&(r=o[1]),t.exports=r&&+r},function(t,e,n){var o=n(20);t.exports=o("navigator","userAgent")||""},function(t,e,n){"use strict";(function(t){n(32),n(42),n(43),n(126),n(13),n(48),n(28),n(85),n(29),n(77),n(15),n(51),n(46),n(31),n(47);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o,r){"function"==typeof define&&n(87)?define(["jquery"],(function(t){return r(t)})):"object"==("undefined"==typeof exports?"undefined":e(exports))?t.exports=r(n(88)):r(jQuery)}(0,(function(t){var n,o,r;o={ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},n={beforeSave:function(t){return i.arrayToDefaultHash(t)},matcher:function(t,e,n,o){var r,i,a;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=decodeURI("%C3%80"),i=decodeURI("%C3%BF"),(a=new RegExp(t+"([A-Za-z"+r+"-"+i+"0-9_"+(o?" ":"")+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi").exec(e))?a[2]||a[1]:null},filter:function(t,e,n){var o,r,i,a;for(o=[],r=0,a=e.length;a>r;r++)i=e[r],~new String(i[n]).toLowerCase().indexOf(t.toLowerCase())&&o.push(i);return o},remoteFilter:null,sorter:function(t,e,n){var o,r,i,a;if(!t)return e;for(o=[],r=0,a=e.length;a>r;r++)(i=e[r]).atwho_order=new String(i[n]).toLowerCase().indexOf(t.toLowerCase()),i.atwho_order>-1&&o.push(i);return o.sort((function(t,e){return t.atwho_order-e.atwho_order}))},tplEval:function(t,e){var n,o;o=t;try{return"string"!=typeof t&&(o=t(e)),o.replace(/\$\{([^\}]*)\}/g,(function(t,n,o){return e[n]}))}catch(n){return n,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*([^<]*?)("+e.replace("+","\\+")+")([^<]*)\\s*<","ig"),t.replace(n,(function(t,e,n,o){return"> "+e+"<strong>"+n+"</strong>"+o+" <"}))):t},beforeInsert:function(t,e,n){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}},r=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var n;return null!=(n=this.$el)&&n.remove(),t(e.body).append(this.$el=t("<div class='atwho-container'></div>"))},e.prototype.setupRootElement=function(e,n){var o,r;if(null==n&&(n=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(r){if(o=r,this.iframe=null,t.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+o)}}return this.createContainer((this.iframeAsRoot=n)?this.document:document)},e.prototype.controller=function(t){var e,n,o,r;if(this.aliasMaps[t])n=this.controllers[this.aliasMaps[t]];else for(o in r=this.controllers)if(e=r[o],o===t){n=e;break}return n||this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var n,o;return o=(n=this.controllers)[t]||(n[t]=this.$inputor.is("[contentEditable]")?new u(this,t):new s(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),o.init(e),this},e.prototype.listen=function(){return this.$inputor.on("compositionstart",function(t){return function(e){var n;return null!=(n=t.controller())&&n.view.hide(),t.isComposing=!0,null}}(this)).on("compositionend",function(t){return function(e){return t.isComposing=!1,setTimeout((function(e){return t.dispatch(e)})),null}}(this)).on("keyup.atwhoInner",function(t){return function(e){return t.onKeyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.onKeydown(e)}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;return(n=t.controller())?(n.expectedQueryCBId=null,n.view.hide(e,n.getOpt("displayTimeout"))):void 0}}(this)).on("click.atwhoInner",function(t){return function(e){return t.dispatch(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(n){var o,r;return o=n.target.scrollTop,e!==o&&null!=(r=t.controller())&&r.view.hide(n),e=o,!0}}}(this)())},e.prototype.shutdown=function(){var t,e;for(t in e=this.controllers)e[t].destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(t){var e,n,o,r;for(e in r=[],o=this.controllers)n=o[e],r.push(n.lookUp(t));return r},e.prototype.onKeyup=function(e){var n;switch(e.keyCode){case o.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case o.DOWN:case o.UP:case o.CTRL:case o.ENTER:t.noop();break;case o.P:case o.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var n,r;if((r=null!=(n=this.controller())?n.view:void 0)&&r.visible())switch(e.keyCode){case o.ESC:e.preventDefault(),r.hide(e);break;case o.UP:e.preventDefault(),r.prev();break;case o.DOWN:e.preventDefault(),r.next();break;case o.P:if(!e.ctrlKey)return;e.preventDefault(),r.prev();break;case o.N:if(!e.ctrlKey)return;e.preventDefault(),r.next();break;case o.TAB:case o.ENTER:case o.SPACE:if(!r.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&e.keyCode===o.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&e.keyCode===o.TAB)return;r.highlighted()?(e.preventDefault(),r.choose(e)):r.hide(e);break;default:t.noop()}},e}();var i,a=[].slice;i=function(){function e(e,n){this.app=e,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new p(this),this.view=new f(this)}return e.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},e.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},e.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},e.prototype.callDefault=function(){var e,o,r,i;i=arguments[0],e=2<=arguments.length?a.call(arguments,1):[];try{return n[i].apply(this,e)}catch(r){return o=r,t.error(o+" Or maybe At.js doesn't have function "+i)}},e.prototype.trigger=function(t,e){var n,o;return null==e&&(e=[]),e.push(this),o=(n=this.getOpt("alias"))?t+"-"+n+".atwho":t+".atwho",this.$inputor.trigger(o,e)},e.prototype.callbacks=function(t){return this.getOpt("callbacks")[t]||n[t]},e.prototype.getOpt=function(t,e){var n;try{return this.setting[t]}catch(n){return n,null}},e.prototype.insertContentFor=function(e){var n,o;return o=this.getOpt("insertTpl"),n=t.extend({},e.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,o,n,"onInsert")},e.prototype.renderView=function(t){var e;return e=this.getOpt("searchKey"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt("limit")))},e.arrayToDefaultHash=function(e){var n,o,r,i;if(!t.isArray(e))return e;for(i=[],n=0,r=e.length;r>n;n++)o=e[n],t.isPlainObject(o)?i.push(o):i.push({name:o});return i},e.prototype.lookUp=function(t){var e,n;if((!t||"click"!==t.type||this.getOpt("lookUpOnClick"))&&(!this.getOpt("suspendOnComposing")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(n=this.getOpt("delay"))?this._delayLookUp(e,n):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},e.prototype._delayLookUp=function(t,e){var n,o;return n=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=n),(o=e-(n-this.previousCallTime))>0&&e>o?(this.previousCallTime=n,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==n&&(this.previousCallTime=0),this._lookUp(t))},e.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},e.prototype._generateQueryCBId=function(){return{}},e.prototype._lookUp=function(e){var n;return n=function(t,e){return t===this.expectedQueryCBId?e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(n,this,this.expectedQueryCBId))},e}();var s,c=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.catchQuery=function(){var t,e,n,o,r,i,a;return e=this.$inputor.val(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),a=e.slice(0,t),(o="string"==typeof(r=this.callbacks("matcher").call(this,this.at,a,this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar"))))&&r.length<this.getOpt("minLen",0)?void 0:(o&&r.length<=this.getOpt("maxLen",20)?(n=(i=t-r.length)+r.length,this.pos=i,r={text:r,headPos:i,endPos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r)},n.prototype.rect=function(){var e,n,o;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(n=t(this.app.iframe).offset(),e.left+=n.left,e.top+=n.top),o=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+o}},n.prototype.insert=function(t,e){var n,o,r,i,a;return a=""+(r=(o=(n=this.$inputor).val()).slice(0,Math.max(this.query.headPos-this.at.length,0)))+(t+=i=""===(i=this.getOpt("suffix"))?i:i||" ")+o.slice(this.query.endPos||0),n.val(a),n.caret("pos",r.length+t.length,{iframe:this.app.iframe}),n.is(":focus")||n.focus(),n.change()},n}(i);var u,p,f,m;c=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;u=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype._getRange=function(){var t;return(t=this.app.window.getSelection()).rangeCount>0?t.getRangeAt(0):void 0},n.prototype._setRange=function(e,n,o){return null==o&&(o=this._getRange()),o&&n?(n=t(n)[0],"after"===e?(o.setEndAfter(n),o.setStartAfter(n)):(o.setEndBefore(n),o.setStartBefore(n)),o.collapse(!1),this._clearRange(o)):void 0},n.prototype._clearRange=function(t){var e;return null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed?(e.removeAllRanges(),e.addRange(t)):void 0},n.prototype._movingEvent=function(t){var e;return"click"===t.type||(e=t.which)===o.RIGHT||e===o.LEFT||e===o.UP||e===o.DOWN},n.prototype._unwrap=function(e){var n;return(n=(e=t(e).unwrap().get(0)).nextSibling)&&n.nodeValue&&(e.nodeValue+=n.nodeValue,t(n).remove()),e},n.prototype.catchQuery=function(e){var n,r,i,a,s,c,l,u,p,f,m,d;if((d=this._getRange())&&d.collapsed){if(e.which===o.ENTER)return(r=t(d.startContainer).closest(".atwho-query")).contents().unwrap(),r.is(":empty")&&r.remove(),(r=t(".atwho-query",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(t(d.startContainer).is(this.$inputor))return void this._clearRange();e.which===o.BACKSPACE&&d.startContainer.nodeType===document.ELEMENT_NODE&&(p=d.startOffset-1)>=0?((i=d.cloneRange()).setStart(d.startContainer,p),t(i.cloneContents()).contents().last().is(".atwho-inserted")&&(s=t(d.startContainer).contents().get(p),this._setRange("after",t(s).contents().last()))):e.which===o.LEFT&&d.startContainer.nodeType===document.TEXT_NODE&&((n=t(d.startContainer.previousSibling)).is(".atwho-inserted")&&0===d.startOffset&&this._setRange("after",n.contents().last()))}if(t(d.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(r=t(".atwho-query",this.app.document)).length>0&&r.is(":empty")&&0===r.text().length&&r.remove(),this._movingEvent(e)||r.removeClass("atwho-inserted"),r.length>0)switch(e.which){case o.LEFT:return this._setRange("before",r.get(0),d),void r.removeClass("atwho-query");case o.RIGHT:return this._setRange("after",r.get(0).nextSibling,d),void r.removeClass("atwho-query")}if(r.length>0&&(m=r.attr("data-atwho-at-query"))&&(r.empty().html(m).attr("data-atwho-at-query",null),this._setRange("after",r.get(0),d)),(i=d.cloneRange()).setStart(d.startContainer,0),c="string"==typeof(u=this.callbacks("matcher").call(this,this.at,i.toString(),this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar"))),0===r.length&&c&&(a=d.startOffset-this.at.length-u.length)>=0&&(d.setStart(d.startContainer,a),r=t("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),d.surroundContents(r.get(0)),(l=r.contents().last().get(0))&&(/firefox/i.test(navigator.userAgent)?(d.setStart(l,l.length),d.setEnd(l,l.length),this._clearRange(d)):this._setRange("after",l,d))),!(c&&u.length<this.getOpt("minLen",0)))return c&&u.length<=this.getOpt("maxLen",20)?(f={text:u,el:r},this.trigger("matched",[this.at,f.text]),this.query=f):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&r.hasClass("atwho-inserted")?r.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,r)&&this._setRange("after",this._unwrap(r.text(r.text()).contents().first()))),null)}},n.prototype.rect=function(){var e,n;return(n=this.query.el.offset())&&this.query.el[0].getClientRects().length?(this.app.iframe&&!this.app.iframeAsRoot&&(e=t(this.app.iframe).offset(),n.left+=e.left-this.$inputor.scrollLeft(),n.top+=e.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n):void 0},n.prototype.insert=function(t,e){var n,o,r,i,a;return this.$inputor.is(":focus")||this.$inputor.focus(),(o=this.getOpt("functionOverrides")).insert?o.insert.call(this,t,e):(i=""===(i=this.getOpt("suffix"))?i:i||" ",n=e.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(t).attr("data-atwho-at-query",""+n["atwho-at"]+this.query.text).attr("contenteditable","false"),(r=this._getRange())&&(this.query.el.length&&r.setEndAfter(this.query.el[0]),r.collapse(!1),r.insertNode(a=this.app.document.createTextNode(""+i)),this._setRange("after",a,r)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change())},n}(i),p=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,o,r;return o=this.fetch(),r=this.context.getOpt("searchKey"),o=this.context.callbacks("filter").call(this.context,t,o,r)||[],n=this.context.callbacks("remoteFilter"),o.length>0||!n&&0===o.length?e(o):n.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),f=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt("alias")||this.context.at.charCodeAt(0),(t=this.context.getOpt("headerTpl"))&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:"at-view-"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,n,o;return e=this.$el.find("ul"),n=0,o=0,e.on("mousemove.atwho-view","li",(function(r){var i;if((n!==r.clientX||o!==r.clientY)&&(n=r.clientX,o=r.clientY,!(i=t(r.currentTarget)).hasClass("cur")))return e.find(".cur").removeClass("cur"),i.addClass("cur")})).on("click.atwho-view","li",function(n){return function(o){return e.find(".cur").removeClass("cur"),t(o.currentTarget).addClass("cur"),n.choose(o),o.preventDefault()}}(this))},e.prototype.visible=function(){return t.expr.filters.visible(this.$el[0])},e.prototype.highlighted=function(){return this.$el.find(".cur").length>0},e.prototype.choose=function(t){var e,n;return(e=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,e,t),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.getOpt("hideWithoutSuffix")?this.stopShowing=!0:void 0},e.prototype.reposition=function(e){var n,o,r,i;return n=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(n).scrollTop()>t(n).height()&&(e.bottom=e.top-this.$el.height()),e.left>(r=t(n).width()-this.$el.width()-5)&&(e.left=r),o={left:e.left,top:e.bottom},null!=(i=this.context.callbacks("beforeReposition"))&&i.call(this.context,o),this.$el.offset(o),this.context.trigger("reposition",[o])},e.prototype.next=function(){var t,e,n;return(t=this.$el.find(".cur").removeClass("cur").next()).length||(t=this.$el.find("li:first")),t.addClass("cur"),n=(e=t[0]).offsetTop+e.offsetHeight+(e.nextSibling?e.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,n-this.$el.height()))},e.prototype.prev=function(){var t,e,n;return(e=this.$el.find(".cur").removeClass("cur").prev()).length||(e=this.$el.find("li:last")),e.addClass("cur"),t=(n=e[0]).offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,t-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return(e=this.context.getOpt("scrollDuration"))?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,e))},e.prototype.render=function(e){var n,o,r,i,a,s,c;if(t.isArray(e)&&e.length>0){for(this.$el.find("ul").empty(),o=this.$el.find("ul"),c=this.context.getOpt("displayTpl"),r=0,a=e.length;a>r;r++)i=e[r],i=t.extend({},i,{"atwho-at":this.context.at}),s=this.context.callbacks("tplEval").call(this.context,c,i,"onDisplay"),(n=t(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text))).data("item-data",i),o.append(n);return this.show(),this.context.getOpt("highlightFirst")?o.find("li:first").addClass("cur"):void 0}this.hide()},e}(),m={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;return(t=this.controller())?t.view.reposition(t.rect()):void 0},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t.fn.atwho=function(n){var o,i;return o=arguments,i=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each((function(){var a,s;return(s=(a=t(this)).data("atwho"))||a.data("atwho",s=new r(this)),"object"!=e(n)&&n?m[n]&&s?i=m[n].apply(s,Array.prototype.slice.call(o,1)):t.error("Method "+n+" does not exist on jQuery.atwho"):s.reg(n.at,n)})),null!=i?i:this},t.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",headerTpl:null,callbacks:n,functionOverrides:{},searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1}))}).call(this,n(84)(t))},function(t,e,n){"use strict";var o=n(5),r=n(41).filter,i=n(86),a=n(30),s=i("filter"),c=a("filter");o({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var o=n(128);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n(90).default)("8e87fa8e",o,!0,{})},function(t,e,n){(e=n(89)(!1)).push([t.i,".atwho-view{position:absolute;top:0;left:0;display:none;margin-top:18px;background:var(--color-main-background);color:var(--color-main-text);border:1px solid var(--color-border);border-radius:var(--border-radius);box-shadow:0 0 5px var(--color-box-shadow);min-width:120px;z-index:11110 !important}.atwho-view .atwho-header{padding:5px;margin:5px;cursor:pointer;border-bottom:solid 1px var(--color-border);color:var(--color-main-text);font-size:11px;font-weight:bold}.atwho-view .atwho-header .small{color:var(--color-main-text);float:right;padding-top:2px;margin-right:-5px;font-size:12px;font-weight:normal}.atwho-view .atwho-header:hover{cursor:default}.atwho-view .cur{background:var(--color-primary);color:var(--color-primary-text)}.atwho-view .cur small{color:var(--color-primary-text)}.atwho-view strong{color:var(--color-main-text);font-weight:normal}.atwho-view .cur strong{color:var(--color-primary-text);font-weight:normal}.atwho-view ul{list-style:none;padding:0;margin:auto;max-height:200px;overflow-y:auto}.atwho-view ul li{display:block;padding:5px 10px;border-bottom:1px solid var(--color-border);cursor:pointer}.atwho-view small{font-size:smaller;color:var(--color-main-text);font-weight:normal}\n",""]),t.exports=e},function(t,e,n){var o=n(130);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n(90).default)("477a5c21",o,!0,{})},function(t,e,n){(e=n(89)(!1)).push([t.i,"#commentsTabView .emptycontent{margin-top:0}#commentsTabView .newCommentForm{margin-left:36px;position:relative}#commentsTabView .newCommentForm .message{width:100%;padding:10px;min-height:44px;margin:0;padding-right:30px}#commentsTabView .newCommentForm .submit,#commentsTabView .newCommentForm .submitLoading{width:44px;height:44px;margin:0;padding:13px;background-color:transparent;border:none;opacity:.3;position:absolute;bottom:0;right:0}#commentsTabView .deleteLoading{padding:14px;vertical-align:middle}#commentsTabView .newCommentForm .submit:not(:disabled):hover,#commentsTabView .newCommentForm .submit:not(:disabled):focus{opacity:1}#commentsTabView .newCommentForm div.message{resize:none}#commentsTabView .newCommentForm div.message:empty:before{content:attr(data-placeholder);color:grey}#commentsTabView .comment{position:relative;padding:10px 0 15px}#commentsTabView .comments .comment{border-top:1px solid var(--color-border)}#commentsTabView .comment .avatar,.atwho-view-ul * .avatar{width:32px;height:32px;line-height:32px;margin-right:5px}#commentsTabView .comment .message .avatar,.atwho-view-ul * .avatar{display:inline-block}#activityTabView li.comment.collapsed .activitymessage,#commentsTabView .comment.collapsed .message{white-space:pre-wrap}#activityTabView li.comment.collapsed .activitymessage,#commentsTabView .comment.collapsed .message{max-height:70px;overflow:hidden}#activityTabView li.comment .message-overlay,#commentsTabView .comment .message-overlay{display:none}#activityTabView li.comment.collapsed .message-overlay,#commentsTabView .comment.collapsed .message-overlay{display:block;position:absolute;z-index:2;height:50px;pointer-events:none;left:0;right:0;bottom:0;background:-moz-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:-webkit-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:-o-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:-ms-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background-repeat:no-repeat}#commentsTabView .hidden{display:none !important}#commentsTabView .comment .authorRow{min-height:44px}#commentsTabView .comment .authorRow .tooltip{margin-top:5px}.atwho-view-ul * .avatar-name-wrapper,#commentsTabView .comment .authorRow{position:relative;display:inline-flex;align-items:center;width:100%}#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser),#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar,#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar img,#commentsTabView .comment .authorRow .avatar:not(.currentUser),#commentsTabView .comment .authorRow .author:not(.currentUser){cursor:pointer}.atwho-view-ul .avatar-name-wrapper,.atwho-view-ul .avatar-name-wrapper .avatar,.atwho-view-ul .avatar-name-wrapper .avatar img{cursor:pointer}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper{position:relative;display:inline;vertical-align:top;background-color:var(--color-background-dark);border-radius:50vh;padding:1px 7px 1px 1px;white-space:nowrap}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar{height:16px;width:16px;vertical-align:middle;padding:1px;margin-top:-3px;margin-left:0;margin-right:2px}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar img,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar img{vertical-align:top}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper strong,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper strong{font-weight:bold}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper.currentUser,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper.currentUser{background-color:var(--color-primary);color:var(--color-primary-text)}.atwho-view-ul * .avatar-name-wrapper{white-space:nowrap}#commentsTabView .comment .author,#commentsTabView .comment .date{opacity:.5}#commentsTabView .comment .author{max-width:210px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}#commentsTabView .comment .date{margin-left:auto;padding:10px 0px}#commentsTabView .comments>li:not(.newCommentRow) .message{padding-left:40px;word-wrap:break-word;overflow-wrap:break-word}#commentsTabView .comment .action{opacity:0.3;padding:14px;display:block}#commentsTabView .comment .action:hover,#commentsTabView .comment .action:focus{opacity:1}#commentsTabView .newCommentRow .action-container{margin-left:auto}#commentsTabView .comment.disabled .message{opacity:0.3}#commentsTabView .comment.disabled .action{display:none}#commentsTabView .message.error{color:#e9322d;border-color:#e9322d;box-shadow:0 0 6px #f8b9b7}.app-files .action-comment{padding:16px 14px}#commentsTabView .comment .message .contactsmenu-popover{left:-6px;top:24px}\n",""]),t.exports=e},function(e,o,r){"use strict";r.r(o);var i,a;r(91),r(32),r(42),r(43),r(28),r(74),r(29),r(46),r(47);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=Handlebars.template,(a=OCA.Comments.Templates=OCA.Comments.Templates||{}).comment=i({1:function(t,e,n,o,r){return" unread"},3:function(t,e,n,o,r){return" collapsed"},5:function(t,e,n,o,r){return" currentUser"},7:function(t,e,n,o,r){var i;return'data-username="'+t.escapeExpression("function"==typeof(i=null!=(i=n.actorId||(null!=e?e.actorId:e))?i:n.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"actorId",hash:{},data:r}):i)+'"'},9:function(t,e,n,o,r){return'\t\t\t<a href="#" class="action more icon icon-more has-tooltip"></a>\n\t\t\t<div class="deleteLoading icon-loading-small hidden"></div>\n'},11:function(t,e,n,o,r){return'\t\t<div class="message-overlay"></div>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,o,r){var i,a,c=null!=e?e:t.nullContext||{},l=n.helperMissing,u="function",p=t.escapeExpression;return'<li class="comment'+(null!=(i=n.if.call(c,null!=e?e.isUnread:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?i:"")+(null!=(i=n.if.call(c,null!=e?e.isLong:e,{name:"if",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r}))?i:"")+'" data-id="'+p(s(a=null!=(a=n.id||(null!=e?e.id:e))?a:l)===u?a.call(c,{name:"id",hash:{},data:r}):a)+'">\n\t<div class="authorRow">\n\t\t<div class="avatar'+(null!=(i=n.if.call(c,null!=e?e.isUserAuthor:e,{name:"if",hash:{},fn:t.program(5,r,0),inverse:t.noop,data:r}))?i:"")+'" '+(null!=(i=n.if.call(c,null!=e?e.actorId:e,{name:"if",hash:{},fn:t.program(7,r,0),inverse:t.noop,data:r}))?i:"")+'> </div>\n\t\t<div class="author'+(null!=(i=n.if.call(c,null!=e?e.isUserAuthor:e,{name:"if",hash:{},fn:t.program(5,r,0),inverse:t.noop,data:r}))?i:"")+'">'+p(s(a=null!=(a=n.actorDisplayName||(null!=e?e.actorDisplayName:e))?a:l)===u?a.call(c,{name:"actorDisplayName",hash:{},data:r}):a)+"</div>\n"+(null!=(i=n.if.call(c,null!=e?e.isUserAuthor:e,{name:"if",hash:{},fn:t.program(9,r,0),inverse:t.noop,data:r}))?i:"")+'\t\t<div class="date has-tooltip live-relative-timestamp" data-timestamp="'+p(s(a=null!=(a=n.timestamp||(null!=e?e.timestamp:e))?a:l)===u?a.call(c,{name:"timestamp",hash:{},data:r}):a)+'" title="'+p(s(a=null!=(a=n.altDate||(null!=e?e.altDate:e))?a:l)===u?a.call(c,{name:"altDate",hash:{},data:r}):a)+'">'+p(s(a=null!=(a=n.date||(null!=e?e.date:e))?a:l)===u?a.call(c,{name:"date",hash:{},data:r}):a)+'</div>\n\t</div>\n\t<div class="message">'+(null!=(i=s(a=null!=(a=n.formattedMessage||(null!=e?e.formattedMessage:e))?a:l)===u?a.call(c,{name:"formattedMessage",hash:{},data:r}):a)?i:"")+"</div>\n"+(null!=(i=n.if.call(c,null!=e?e.isLong:e,{name:"if",hash:{},fn:t.program(11,r,0),inverse:t.noop,data:r}))?i:"")+"</li>\n"},useData:!0}),a.commentsmodifymenu=i({1:function(t,e,n,o,r){var i,a,c=null!=e?e:t.nullContext||{},l=n.helperMissing,u=t.escapeExpression;return'\t\t<li>\n\t\t\t<a href="#" class="menuitem action '+u("function"===s(a=null!=(a=n.name||(null!=e?e.name:e))?a:l)?a.call(c,{name:"name",hash:{},data:r}):a)+' permanent" data-action="'+u("function"===s(a=null!=(a=n.name||(null!=e?e.name:e))?a:l)?a.call(c,{name:"name",hash:{},data:r}):a)+'">\n'+(null!=(i=n.if.call(c,null!=e?e.iconClass:e,{name:"if",hash:{},fn:t.program(2,r,0),inverse:t.program(4,r,0),data:r}))?i:"")+"\t\t\t\t<span>"+u("function"===s(a=null!=(a=n.displayName||(null!=e?e.displayName:e))?a:l)?a.call(c,{name:"displayName",hash:{},data:r}):a)+"</span>\n\t\t\t</a>\n\t\t</li>\n"},2:function(t,e,n,o,r){var i;return'\t\t\t\t\t<span class="icon '+t.escapeExpression("function"==typeof(i=null!=(i=n.iconClass||(null!=e?e.iconClass:e))?i:n.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"iconClass",hash:{},data:r}):i)+'"></span>\n'},4:function(t,e,n,o,r){return'\t\t\t\t\t<span class="no-icon"></span>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,o,r){var i;return"<ul>\n"+(null!=(i=n.each.call(null!=e?e:t.nullContext||{},null!=e?e.items:e,{name:"each",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?i:"")+"</ul>\n"},useData:!0}),a.edit_comment=i({1:function(t,e,n,o,r){var i;return'\t\t\t<div class="action-container">\n\t\t\t\t<a href="#" class="action cancel icon icon-close has-tooltip" title="'+t.escapeExpression("function"==typeof(i=null!=(i=n.cancelText||(null!=e?e.cancelText:e))?i:n.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"cancelText",hash:{},data:r}):i)+'"></a>\n\t\t\t</div>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,o,r){var i,a,c=null!=e?e:t.nullContext||{},l=n.helperMissing,u="function",p=t.escapeExpression;return"<"+p(s(a=null!=(a=n.tag||(null!=e?e.tag:e))?a:l)===u?a.call(c,{name:"tag",hash:{},data:r}):a)+' class="newCommentRow comment" data-id="'+p(s(a=null!=(a=n.id||(null!=e?e.id:e))?a:l)===u?a.call(c,{name:"id",hash:{},data:r}):a)+'">\n\t<div class="authorRow">\n\t\t<div class="avatar currentUser" data-username="'+p(s(a=null!=(a=n.actorId||(null!=e?e.actorId:e))?a:l)===u?a.call(c,{name:"actorId",hash:{},data:r}):a)+'"></div>\n\t\t<div class="author currentUser">'+p(s(a=null!=(a=n.actorDisplayName||(null!=e?e.actorDisplayName:e))?a:l)===u?a.call(c,{name:"actorDisplayName",hash:{},data:r}):a)+"</div>\n"+(null!=(i=n.if.call(c,null!=e?e.isEditMode:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?i:"")+'\t</div>\n\t<form class="newCommentForm">\n\t\t<div contentEditable="true" class="message" data-placeholder="'+p(s(a=null!=(a=n.newMessagePlaceholder||(null!=e?e.newMessagePlaceholder:e))?a:l)===u?a.call(c,{name:"newMessagePlaceholder",hash:{},data:r}):a)+'">'+p(s(a=null!=(a=n.message||(null!=e?e.message:e))?a:l)===u?a.call(c,{name:"message",hash:{},data:r}):a)+'</div>\n\t\t<input class="submit icon-confirm has-tooltip" type="submit" value="" title="'+p(s(a=null!=(a=n.submitText||(null!=e?e.submitText:e))?a:l)===u?a.call(c,{name:"submitText",hash:{},data:r}):a)+'"/>\n\t\t<div class="submitLoading icon-loading-small hidden"></div>\n\t</form>\n</'+p(s(a=null!=(a=n.tag||(null!=e?e.tag:e))?a:l)===u?a.call(c,{name:"tag",hash:{},data:r}):a)+">\n"},useData:!0}),a.filesplugin=i({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,r){var i,a=null!=e?e:t.nullContext||{},c=n.helperMissing,l=t.escapeExpression;return'<a class="action action-comment permanent" title="'+l("function"===s(i=null!=(i=n.countMessage||(null!=e?e.countMessage:e))?i:c)?i.call(a,{name:"countMessage",hash:{},data:r}):i)+'" href="#">\n\t<img class="svg" src="'+l("function"===s(i=null!=(i=n.iconUrl||(null!=e?e.iconUrl:e))?i:c)?i.call(a,{name:"iconUrl",hash:{},data:r}):i)+'"/>\n</a>\n'},useData:!0}),a.view=i({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,r){var i,a=null!=e?e:t.nullContext||{},c=n.helperMissing,l=t.escapeExpression;return'<ul class="comments">\n</ul>\n<div class="emptycontent hidden"><div class="icon-comment"></div>\n\t<p>'+l("function"===s(i=null!=(i=n.emptyResultLabel||(null!=e?e.emptyResultLabel:e))?i:c)?i.call(a,{name:"emptyResultLabel",hash:{},data:r}):i)+'</p></div>\n<input type="button" class="showMore hidden" value="'+l("function"===s(i=null!=(i=n.moreLabel||(null!=e?e.moreLabel:e))?i:c)?i.call(a,{name:"moreLabel",hash:{},data:r}):i)+'" name="show-more" id="show-more" />\n<div class="loading hidden" style="height: 50px"></div>\n'},useData:!0});r(107);!function(t,e){_.extend(t.Files.Client,{PROPERTY_FILEID:"{"+t.Files.Client.NS_OWNCLOUD+"}id",PROPERTY_MESSAGE:"{"+t.Files.Client.NS_OWNCLOUD+"}message",PROPERTY_ACTORTYPE:"{"+t.Files.Client.NS_OWNCLOUD+"}actorType",PROPERTY_ACTORID:"{"+t.Files.Client.NS_OWNCLOUD+"}actorId",PROPERTY_ISUNREAD:"{"+t.Files.Client.NS_OWNCLOUD+"}isUnread",PROPERTY_OBJECTID:"{"+t.Files.Client.NS_OWNCLOUD+"}objectId",PROPERTY_OBJECTTYPE:"{"+t.Files.Client.NS_OWNCLOUD+"}objectType",PROPERTY_ACTORDISPLAYNAME:"{"+t.Files.Client.NS_OWNCLOUD+"}actorDisplayName",PROPERTY_CREATIONDATETIME:"{"+t.Files.Client.NS_OWNCLOUD+"}creationDateTime",PROPERTY_MENTIONS:"{"+t.Files.Client.NS_OWNCLOUD+"}mentions"});var n=t.Backbone.Model.extend({sync:t.Backbone.davSync,defaults:{actorType:"users",objectType:"files"},davProperties:{id:t.Files.Client.PROPERTY_FILEID,message:t.Files.Client.PROPERTY_MESSAGE,actorType:t.Files.Client.PROPERTY_ACTORTYPE,actorId:t.Files.Client.PROPERTY_ACTORID,actorDisplayName:t.Files.Client.PROPERTY_ACTORDISPLAYNAME,creationDateTime:t.Files.Client.PROPERTY_CREATIONDATETIME,objectType:t.Files.Client.PROPERTY_OBJECTTYPE,objectId:t.Files.Client.PROPERTY_OBJECTID,isUnread:t.Files.Client.PROPERTY_ISUNREAD,mentions:t.Files.Client.PROPERTY_MENTIONS},parse:function(t){return{id:t.id,message:t.message,actorType:t.actorType,actorId:t.actorId,actorDisplayName:t.actorDisplayName,creationDateTime:t.creationDateTime,objectType:t.objectType,objectId:t.objectId,isUnread:"true"===t.isUnread,mentions:this._parseMentions(t.mentions)}},_parseMentions:function(t){if(_.isUndefined(t))return{};var e={};for(var n in t){var o=t[n];if(!_.isUndefined(o.localName)&&"mention"===o.localName){e[n]={};for(var r=o.firstChild;r;r=r.nextSibling)!_.isUndefined(r.localName)&&r.localName.startsWith("mention")&&(e[n][r.localName]=r.textContent)}}return e}});e.Comments.CommentModel=n}(OC,OCA);var c;r(110),r(111),r(13),r(48),r(77),r(15),r(51),r(79),r(31),r(115);!function(e,n){var o=n.Files.DetailTabView.extend({id:"commentsTabView",className:"tab commentsTabView",_autoCompleteData:void 0,_commentsModifyMenu:void 0,events:{"submit .newCommentForm":"_onSubmitComment","click .showMore":"_onClickShowMore","click .cancel":"_onClickCloseComment","click .comment":"_onClickComment","keyup div.message":"_onTextChange","change div.message":"_onTextChange","input div.message":"_onTextChange","paste div.message":"_onPaste"},_commentMaxLength:1e3,initialize:function(){n.Files.DetailTabView.prototype.initialize.apply(this,arguments),this.collection=new n.Comments.CommentCollection,this.collection.on("request",this._onRequest,this),this.collection.on("sync",this._onEndRequest,this),this.collection.on("add",this._onAddModel,this),this.collection.on("change:message",this._onChangeModel,this),this._commentMaxThreshold=.9*this._commentMaxLength,_.bindAll(this,"_onTypeComment","_initAutoComplete","_onAutoComplete")},template:function(t){var o=e.getCurrentUser();return n.Comments.Templates.view(_.extend({actorId:o.uid,actorDisplayName:o.displayName},t))},editCommentTemplate:function(o){var r=e.getCurrentUser();return n.Comments.Templates.edit_comment(_.extend({actorId:r.uid,actorDisplayName:r.displayName,newMessagePlaceholder:t("comments","New comment …"),submitText:t("comments","Post"),cancelText:t("comments","Cancel"),tag:"li"},o))},commentTemplate:function(o){return"deleted_users"===(o=_.extend({editTooltip:t("comments","Edit comment"),isUserAuthor:e.getCurrentUser().uid===o.actorId,isLong:this._isLong(o.message)},o)).actorType&&(o.actorId=null,o.actorDisplayName=t("comments","[Deleted user]")),n.Comments.Templates.comment(o)},getLabel:function(){return t("comments","Comments")},getIcon:function(){return"icon-comment"},setFileInfo:function(t){t?(this.model=t,this.render(),this._initAutoComplete($("#commentsTabView").find(".newCommentForm .message")),this.collection.setObjectId(this.model.id),this.collection.reset([],{silent:!0}),this.nextPage()):(this.model=null,this.render(),this.collection.reset())},render:function(){this.$el.html(this.template({emptyResultLabel:t("comments","No comments yet, start the conversation!"),moreLabel:t("comments","More comments …")})),this.$el.find(".comments").before(this.editCommentTemplate({tag:"div"})),this.$el.find(".has-tooltip").tooltip(),this.$container=this.$el.find("ul.comments"),this.$el.find(".avatar").avatar(e.getCurrentUser().uid,32),this.delegateEvents(),this.$el.find(".message").on("keydown input change",this._onTypeComment),autosize(this.$el.find(".newCommentRow .message")),this.$el.find(".newCommentForm .message").focus()},_initAutoComplete:function(t){var n=this,o=10;_.isUndefined(e.appConfig.comments)||(o=e.appConfig.comments.maxAutoCompleteResults),t.atwho({at:"@",limit:o,callbacks:{remoteFilter:n._onAutoComplete,highlighter:function(t){var e=$(t);return e.find(".avatar").avatar(void 0,32),e},sorter:function(t,e){return e}},displayTpl:function(t){return'<li><span class="avatar-name-wrapper"><span class="avatar" data-username="'+escapeHTML(t.id)+'" data-user="'+escapeHTML(t.id)+'" data-user-display-name="'+escapeHTML(t.label)+'"></span><strong>'+escapeHTML(t.label)+"</strong></span></li>"},insertTpl:function(t){return'<span class="avatar-name-wrapper"><span class="avatar" data-username="'+escapeHTML(t.id)+'" data-user="'+escapeHTML(t.id)+'" data-user-display-name="'+escapeHTML(t.label)+'"></span><strong>'+escapeHTML(t.label)+"</strong></span>"},searchKey:"label"}),t.on("inserted.atwho",(function(t,e){n._postRenderItem($(t.target).find('span[data-username="'+e.find("[data-username]").data("username")+'"]').parent(),!0)}))},_onAutoComplete:function(t,n){var o=this;_.isUndefined(this._autoCompleteRequestTimer)||clearTimeout(this._autoCompleteRequestTimer),this._autoCompleteRequestTimer=_.delay((function(){_.isUndefined(this._autoCompleteRequestCall)||this._autoCompleteRequestCall.abort(),this._autoCompleteRequestCall=$.ajax({url:e.linkToOCS("core",2)+"autocomplete/get",data:{search:t,itemType:"files",itemId:o.model.get("id"),sorter:"commenters|share-recipients",limit:e.appConfig.comments.maxAutoCompleteResults},beforeSend:function(t){t.setRequestHeader("Accept","application/json")},success:function(t){n(t.ocs.data)}})}),400)},_formatItem:function(t){var n=new Date(t.get("creationDateTime")).getTime();return _.extend({timestamp:n,date:e.Util.relativeModifiedDate(n),altDate:e.Util.formatDate(n),formattedMessage:this._formatMessage(t.get("message"),t.get("mentions"))},t.attributes)},_toggleLoading:function(t){this._loading=t,this.$el.find(".loading").toggleClass("hidden",!t)},_onRequest:function(t){"REPORT"===t&&(this._toggleLoading(!0),this.$el.find(".showMore").addClass("hidden"))},_onEndRequest:function(t){var e=this.model;(this._toggleLoading(!1),this.$el.find(".emptycontent").toggleClass("hidden",!!this.collection.length),this.$el.find(".showMore").toggleClass("hidden",!this.collection.hasMoreResults()),"REPORT"===t)&&(this.collection.findWhere({isUnread:!0})&&this.collection.updateReadMarker(null,{success:function(){e.set("commentsUnread",0)}}),this.$el.find(".newCommentForm .message").focus())},_onAddModel:function(t,e,n){var o=$(this.commentTemplate(this._formatItem(t)));!_.isUndefined(n.at)&&e.length>1?this.$container.find("li").eq(n.at).before(o):this.$container.append(o),this._postRenderItem(o),$("#commentsTabView").find(".newCommentForm div.message").text("").prop("contenteditable",!0);var r=t.get("mentions"),i=this;t.fetch({success:function(t){if(!_.isEqual(r,t.get("mentions"))){var e=$(i.commentTemplate(i._formatItem(t)));o.html(e.html()),i._postRenderItem(o)}}})},_onChangeModel:function(t){if(t.get("message").trim()!==t.previous("message").trim()){var e=this.$container.find('.comment[data-id="'+t.id+'"] form').closest(".comment"),n=e.data("commentEl");if(!_.isUndefined(n)){var o=this;t.fetch({success:function(t){n.removeClass("hidden"),e.remove();var r=n.find(".message");r.html(o._formatMessage(t.get("message"),t.get("mentions"))).find(".avatar").each((function(){$(this).avatar()})),o._postRenderItem(r)}})}}},_postRenderItem:function(t,o){t.find(".has-tooltip").tooltip();var r=t.find(".message .avatar");$(t.context).hasClass("message")&&(r=t.find(".avatar")),r.each((function(){var t=$(this);t.avatar(t.attr("data-username"),16)})),t.find(".authorRow .avatar").each((function(){var t=$(this);t.avatar(t.attr("data-username"),32)}));var i=t.find(".avatar").data("username");i!==e.getCurrentUser().uid&&t.find(".authorRow .avatar, .authorRow .author").contactsMenu(i,0,t.find(".authorRow"));var a=t.find(".message");if(0===a.length&&(a=t),!o){var s=this,c=new n.Comments.CommentsModifyMenu;t.find(".authorRow").append(c.$el),t.find(".more").on("click",_.bind(c.show,c)),s.listenTo(c,"select:menu-item-clicked",(function(t,e){"edit"===e?s._onClickEditComment(t):"delete"===e&&s._onClickDeleteComment(t)}))}this._postRenderMessage(a,o)},_postRenderMessage:function(t,n){n||t.find(".avatar-name-wrapper").each((function(){var t=$(this),n=t.find(".avatar").data("user");n!==e.getCurrentUser().uid&&t.contactsMenu(n,0,t)}))},_formatMessage:function(t,e,n){for(var o in t=escapeHTML(t).replace(/\n/g,"<br/>"),e){if(!e.hasOwnProperty(o))return;var r="@"+e[o].mentionId;-1!==e[o].mentionId.indexOf(" ")&&(r=_.escape('@"'+e[o].mentionId+'"')),r=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var i=new RegExp("(^|\\s)("+r+")\\b","g");-1!==e[o].mentionId.indexOf(" ")&&(i=new RegExp("(^|\\s)("+r+")","g"));var a=this._composeHTMLMention(e[o].mentionId,e[o].mentionDisplayName);t=t.replace(i,(function(t,e){return e+a}))}return!0!==n&&(t=OCP.Comments.plainToRich(t)),t},_composeHTMLMention:function(t,n){var o='<span class="avatar" data-username="'+_.escape(t)+'" data-user="'+_.escape(t)+'" data-user-display-name="'+_.escape(n)+'"></span>';return'<span class="atwho-inserted" contenteditable="false"><span class="avatar-name-wrapper'+(t===e.getCurrentUser().uid?" currentUser":"")+'">'+o+"<strong>"+_.escape(n)+"</strong></span></span>"},nextPage:function(){!this._loading&&this.collection.hasMoreResults()&&this.collection.fetchNext()},_onClickEditComment:function(e){e.preventDefault();var n=$(e.target).closest(".comment"),o=n.data("id"),r=this.collection.get(o),i=$(this.editCommentTemplate(_.extend({isEditMode:!0,submitText:t("comments","Save")},r.attributes)));n.addClass("hidden").removeClass("collapsed"),n.after(i),i.data("commentEl",n),i.find(".message").on("keydown input change",this._onTypeComment),i.find(".avatar:first").replaceWith(n.find(".avatar:first").clone()),i.find(".has-tooltip").tooltip();var a=i.find(".message");a.html(this._formatMessage(r.get("message"),r.get("mentions"),!0)).find(".avatar").each((function(){$(this).avatar()}));return this._postRenderItem(a,!0),autosize(i.find(".message")),this._initAutoComplete(i.find(".message")),!1},_onTypeComment:function(e){var n=$(e.target),o=n.text().length,r=n.data("submitButtonEl");r||(r=n.closest("form").find(".submit"),n.data("submitButtonEl",r)),n.tooltip("hide"),o>this._commentMaxThreshold&&(n.attr("data-original-title",t("comments","Allowed characters {count} of {max}",{count:o,max:this._commentMaxLength})),n.tooltip({trigger:"manual"}),n.tooltip("show"),n.addClass("error"));var i=o>this._commentMaxLength;n.toggleClass("error",i),r.prop("disabled",i),13!==e.keyCode||e.shiftKey||n.atwho("isSelecting")||(r.click(),e.preventDefault())},_onClickComment:function(t){var e=$(t.target);e.is(".comment")||(e=e.closest(".comment")),e.removeClass("collapsed")},_onClickCloseComment:function(t){t.preventDefault();var e=$(t.target).closest(".comment");return e.data("commentEl").removeClass("hidden"),e.remove(),!1},_onClickDeleteComment:function(n){n.preventDefault();var o=$(n.target).closest(".comment"),r=o.data("id"),i=o.find(".deleteLoading"),a=o.find(".more");return o.addClass("disabled"),i.removeClass("hidden"),a.addClass("hidden"),o.data("commentEl",o),this.collection.get(r).destroy({success:function(){o.data("commentEl").remove(),o.remove()},error:function(){i.addClass("hidden"),a.removeClass("hidden"),o.removeClass("disabled"),e.Notification.showTemporary(t("comments","Error occurred while retrieving comment with ID {id}",{id:r}))}}),!1},_onClickShowMore:function(t){t.preventDefault(),this.nextPage()},_onSubmitSuccess:function(t,e){var n=e.find(".submit"),o=e.find(".submitLoading");n.removeClass("hidden"),o.addClass("hidden")},_commentBodyHTML2Plain:function(t){var e,n=t.clone();n.find(".avatar-name-wrapper").each((function(){var t=$(this),e=t.parent(),n=t.find(".avatar").data("username").toString();-1!==n.indexOf(" ")?e.html('@"'+n+'"'):e.html("@"+n)})),n.html(OCP.Comments.richToPlain(n.html()));var o=n.html();do{o=(e=o).replace("<br>","\n")}while(e!==o);return n.html(o),n.text()},_onSubmitComment:function(t){var n=this,o=$(t.target),r=o.closest(".comment").data("id"),i=e.getCurrentUser(),a=o.find(".submit"),s=o.find(".submitLoading"),c=o.find(".message"),l=c.text().trim();if(t.preventDefault(),l.length&&!(l.length>this._commentMaxLength)){if(c.prop("contenteditable",!1),a.addClass("hidden"),s.removeClass("hidden"),l=this._commentBodyHTML2Plain(c),r)this.collection.get(r).save({message:l},{success:function(t){if(n._onSubmitSuccess(t,o),t.get("message").trim()===t.previous("message").trim()){var e=o.closest(".comment");e.data("commentEl").removeClass("hidden"),e.remove()}},error:function(){n._onSubmitError(o,r)}});else this.collection.create({actorId:i.uid,actorDisplayName:i.displayName,actorType:"users",verb:"comment",message:l,creationDateTime:(new Date).toUTCString()},{at:0,wait:!0,success:function(t){n._onSubmitSuccess(t,o)},error:function(){n._onSubmitError(o,void 0)}});return!1}},_onSubmitError:function(n,o){n.find(".submit").removeClass("hidden"),n.find(".submitLoading").addClass("hidden"),n.find(".message").prop("contenteditable",!0),_.isUndefined(o)?e.Notification.show(t("comments","Error occurred while posting comment"),{type:"error"}):e.Notification.show(t("comments","Error occurred while updating comment with id {id}",{id:o}),{type:"error"})},_onTextChange:function(){var t=$("#commentsTabView").find(".newCommentForm div.message");t.text().trim().length||t.empty()},_onPaste:function(t){t.preventDefault();var e=t.originalEvent.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)},_isLong:function(t){return t.length>250||(t.match(/\n/g)||[]).length>1}});n.Comments.CommentsTabView=o}(OC,OCA),OC,OCA,c=OC.Backbone.View.extend({tagName:"div",className:"commentsModifyMenu popovermenu bubble menu",_scopes:[{name:"edit",displayName:t("comments","Edit comment"),iconClass:"icon-rename"},{name:"delete",displayName:t("comments","Delete comment"),iconClass:"icon-delete"}],initialize:function(){},events:{"click a.action":"_onClickAction"},_onClickAction:function(t){var e=$(t.currentTarget);e.hasClass("menuitem")||(e=e.closest(".menuitem")),OC.hideMenus(),this.trigger("select:menu-item-clicked",t,e.data("action"))},render:function(){this.$el.html(OCA.Comments.Templates.commentsmodifymenu({items:this._scopes}))},show:function(t){for(var e in this._context=t,this._scopes)this._scopes[e].active=!1;var n=$(t.target),o=n.offset(),r=n.closest(".authorRow").offset(),i={top:o.top-r.top+48,left:"",right:""};i.left=o.left-r.left,i.left>200?(i.left="",i.right=this.$el.closest(".comment").find(".date").width(),this.$el.removeClass("menu-left").addClass("menu-right")):this.$el.removeClass("menu-right").addClass("menu-left"),this.$el.css(i),this.render(),this.$el.removeClass("hidden"),OC.showMenu(null,this.$el)}}),OCA.Comments=OCA.Comments||{},OCA.Comments.CommentsModifyMenu=c,_.extend(OC.Files.Client,{PROPERTY_COMMENTS_UNREAD:"{"+OC.Files.Client.NS_OWNCLOUD+"}comments-unread"}),OCA.Comments=_.extend({},OCA.Comments),OCA.Comments||(OCA.Comments={}),OCA.Comments.FilesPlugin={ignoreLists:["trashbin","files.public"],_formatCommentCount:function(t){return OCA.Comments.Templates.filesplugin({count:t,countMessage:n("comments","%n unread comment","%n unread comments",t),iconUrl:OC.imagePath("core","actions/comment")})},attach:function(e){var o=this;if(!(this.ignoreLists.indexOf(e.id)>=0)){e.registerTabView(new OCA.Comments.CommentsTabView("commentsTabView"));var r=e._getWebdavProperties;e._getWebdavProperties=function(){var t=r.apply(this,arguments);return t.push(OC.Files.Client.PROPERTY_COMMENTS_UNREAD),t},e.filesClient.addFileInfoParser((function(t){var e={},n=t.propStat[0].properties[OC.Files.Client.PROPERTY_COMMENTS_UNREAD];return _.isUndefined(n)||""===n||(e.commentsUnread=parseInt(n,10)),e})),e.$el.addClass("has-comments");var i=e._createRow;e._createRow=function(t){var e=i.apply(this,arguments);return t.commentsUnread&&e.attr("data-comments-unread",t.commentsUnread),e},e.fileActions.registerAction({name:"Comment",displayName:function(e){if(e&&e.$file){var o=parseInt(e.$file.data("comments-unread"),10);if(o>=0)return n("comments","1 new comment","{unread} new comments",o,{unread:o})}return t("comments","Comment")},mime:"all",order:-140,iconClass:"icon-comment",permissions:OC.PERMISSION_READ,type:OCA.Files.FileActions.TYPE_INLINE,render:function(t,e,n){var r=n.$file.data("comments-unread");if(r){var i=$(o._formatCommentCount(r));return n.$file.find("a.name>span.fileactions").append(i),i}return""},actionHandler:function(t,e){e.$file.find(".action-comment").tooltip("hide"),e.fileList.showDetailsView(t,"comments")}});var a=e.elementToFile;e.elementToFile=function(t){var e=a.apply(this,arguments),n=t.data("comments-unread");return n&&(e.commentsUnread=n),e}}}},OC.Plugins.register("OCA.Files.FileList",OCA.Comments.FilesPlugin),OCA.Comments.ActivityTabViewPlugin={prepareModelForDisplay:function(t,e,n){if("comments"===t.get("app")&&"comments"===t.get("type")&&"ActivityTabView"===n&&(e.addClass("comment"),t.get("message")&&this._isLong(t.get("message")))){e.addClass("collapsed");var o=$("<div>").addClass("message-overlay");e.find(".activitymessage").after(o),e.on("click",this._onClickCollapsedComment)}},_onClickCollapsedComment:function(t){var e=$(t.target);e.is(".comment")||(e=e.closest(".comment")),e.removeClass("collapsed")},_isLong:function(t){return t.length>250||(t.match(/\n/g)||[]).length>1}},OC.Plugins.register("OCA.Activity.RenderingPlugins",OCA.Comments.ActivityTabViewPlugin);r(118);!function(t,e,n){var o=function(){this.initialize()};o.prototype={fileList:null,initialize:function(){var o=this;this.fileAppLoaded=function(){return!!e.Files&&!!e.Files.App},this.renderCommentResult=function(e,o){var r;(r=n(".nofilterresults")).hasClass("hidden")||r.addClass("hidden"),this.updateLegacyMimetype(o);var i=n("<div>").addClass("path").text(o.path),a=n("<div>");a.addClass("avatar").css("display","inline-block").css("vertical-align","middle").css("margin","0 5px 2px 3px"),o.authorName?a.avatar(o.authorId,21,void 0,!1,void 0,o.authorName):a.avatar(o.authorId,21),e.find("td.info div.name").after(i).text(o.comment).prepend(n("<span>").addClass("path").css("margin-right","5px").text(o.authorName)).prepend(a),e.find("td.result a").attr("href",o.link),e.find("td.icon").css("background-image","url("+t.imagePath("core","actions/comment")+")").css("opacity",".4");var s=t.dirname(o.path);return s===o.path&&(s="/"),e.find("td.info a").attr("href",t.generateUrl("/apps/files/?dir={dir}&scrollto={scrollto}",{dir:s,scrollto:o.fileName})),e},this.handleCommentClick=function(e,n,r){return!o.fileAppLoaded()||"files"!==o.fileList.id||(o.fileList.changeDirectory(t.dirname(n.path)),o.fileList.scrollTo(n.name),!1)},this.updateLegacyMimetype=function(t){!t.mime&&t.mime_type&&(t.mime=t.mime_type)},this.setFileList=function(t){this.fileList=t},t.Plugins.register("OCA.Search.Core",this)},attach:function(t){t.setRenderer("comment",this.renderCommentResult.bind(this)),t.setHandler("comment",this.handleCommentClick.bind(this))}},e.Search.comment=new o}(OC,OCA,$);r(121),r(125),r(127),r(129);window.OCA.Comments=OCA.Comments}]);
//# sourceMappingURL=comments.js.map